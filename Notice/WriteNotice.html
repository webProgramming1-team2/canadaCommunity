<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>캐모아 - 공지사항</title>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <link rel="stylesheet" href="../Notice/Notice.css">
    <script>
        class saveJson {
            // 클래스 생성자 초기화 실시
            constructor(data = []) {
                this.data = data;
            }

            // 파일 다운로드 수행 실시
            download(type_of = "application/json", filename = "notice.json") { // 확장자명을 json 으로 지정

                let txt = [];
                txt.push(JSON.stringify(this.data, null, 2));
                let body = document.body; // body 변수 선언
                const a = document.createElement("a"); // a 태그 생성
                a.href = URL.createObjectURL(new Blob(txt, {
                    type: type_of
                }));
                a.setAttribute("download", filename); // a 태그에 다운로드 속성 추가
                body.appendChild(a); // body에 a 태그 추가
                a.click(); // 클릭 이벤트를 발생시켜 다운로드
                body.removeChild(a); // body에서 제거
            }
        }

        function readJson(jsonText) {
            let json = JSON.parse(jsonText); // String -> json으로 변환

            for (let i = 0; i < json.length; i++) {
                noticeList.push(json[i]);
            }
        }

        let noticeList = [];
        let xhttp = new XMLHttpRequest();

        xhttp.onreadystatechange = function () {
            if (xhttp.readyState === 4 && xhttp.status === 200) {
                readJson(xhttp.responseText);
            }
        }
        xhttp.open("GET", "../Data/notice.json", true);
        xhttp.send();

        $(document).ready(function () {
            $(document.getElementById("header")).load("../Main/Header.html");
            $(document.getElementById("footer")).load("../Main/Footer.html");

            new saveJson(noticeList).download();
        });

    </script>
</head>
<body>
<div id="wrapper">
    <!--header 파일에서 작업-->
    <div id="header"></div>
    <div id="section">
        <form action="Protecting_request.jsp" enctype="multipart/form-data"
              method="post">
            <div id="notice">
                공지사항 등록
                <hr style="margin-top: 15px;" width="100%" color=#c7d696>
            </div>
            <table>
                <tr>
                    <th>• 품종</th>
                    <td><select name="variety" onchange="categoryChange(this)">
                        <option value="">선택</option>
                        <option name="개" value="개">개</option>
                        <option name="고양이" value="고양이">고양이</option>
                        <option name="기타" value="기타">기타</option>
                    </select> <select id="good" name="variety1">
                        <option>선택</option>
                    </select></td>
                </tr>
                <tr>
                    <th>• 성별</th>
                    <td>
                        <div>
                            <input type="hidden" name="sex1" id="sex1" value=""> <input
                                type="checkbox" name="sex" value="수컷"
                                onclick="oneCheckbox(this)"> 수컷 <input type="checkbox"
                                                                       name="sex" value="암컷"
                                                                       onclick="oneCheckbox(this)"> 암컷
                        </div>
                    </td>
                </tr>
                <tr>
                    <th>• 추정 나이</th>
                    <td><input type="text" name="old" value=""></input></td>
                </tr>
                <tr>
                    <th>• 발견 장소</th>
                    <td><select name="place" onchange="categoryChange(this)">
                        <option value="">전체</option>
                        <option value="서울특별시">서울시</option>
                        <option value="인천광역시">인천시</option>
                        <option value="대구광역시">대구시</option>
                        <option value="대전광역시">대전시</option>
                        <option value="광주광역시">광주시</option>
                        <option value="부산광역시">부산시</option>
                        <option value="울산광역시">울산시</option>
                        <option value="세종특별시">세종시</option>
                        <option value="경기도">경기도</option>
                        <option value="강원도">강원도</option>
                        <option value="충청북도">충청북도</option>
                        <option value="충청남도">충청남도</option>
                        <option value="전라북도">전라북도</option>
                        <option value="전라남도">전라남도</option>
                        <option value="경상북도">경상북도</option>
                        <option value="경상남도">경상남도</option>
                        <option value="제주도">제주도</option>
                    </select> <select id="place2" name="place2">
                        <option>선택</option>
                    </select> <input type="text" name="place1" placeholder="상세한 장소를 입력하세요."
                                     style="width: 200px;"></input></td>
                </tr>

                <tr>
                    <th>• 보호 시작 날짜</th>
                    <td><input type="text" name="day" value=""
                               placeholder=" ex)1999-12-31"
                               onkeyup="this.value = date_mask(this.value)"></input></td>
                </tr>
                <tr>
                    <th>• 특징</th>
                    <td><input type="text" name="feature" value=""
                               style="width: 800px; height: 150px;"></input></td>
                </tr>
                <tr>
                    <th>• 문의전화</th>
                    <td><input type="text" name="call" value=""
                               style="width: 200px;" onkeyup="this.value = call_mask(this.value)"></input>
                    </td>
                </tr>
                <tr>
                    <th>• 사진 업로드</th>
                    <td><input type="file" name="image" id="imageFileOpenInput"
                               accept="image/*"></td>
                </tr>
            </table>
            <div class="button">
                <button type="submit">등록</button>
                <button type="button" onclick="location.href='Protecting_board.jsp'">취소</button>
            </div>
        </form>
    </div>
</div>
<!--footer 파일에서 작업-->
<div id="footer"></div>
</body>
</html>